{
  // Enable or disable the Dynamic Context Pruning plugin
  "enabled": true,

  // Enable debug logging to ~/.config/opencode/logs/dcp/
  // Outputs include:
  // - daily/YYYY-MM-DD.log (plugin activity, decisions, errors)
  // - ai-context/*.json (messages sent to AI after pruning)
  "debug": false,

  // Optional: Specify a model to use for analysis instead of the session model
  // Format: "provider/model" (same as agent model config in opencode.jsonc)
  // NOTE: Anthropic OAuth sonnet 4+ tier models are currently not supported
  "model": "github-copilot/gpt-5-mini",

  // Show toast notifications when model selection fails and falls back
  // Set to false to disable these informational toasts
  "showModelErrorToasts": true,

  // Pruning strategies configuration
  // Available strategies: "deduplication", "ai-analysis"
  // Empty array = disabled
  "strategies": {
    // Strategies to run when session goes idle (automatic)
    "onIdle": [],

    // Strategies to run when AI calls the context_pruning tool
    // Empty array = tool not exposed to AI
    "onTool": ["ai-analysis"],
  },

  // Pruning summary display mode:
  // "off": No UI summary (silent pruning)
  // "minimal": Show tokens saved and count (e.g., "Saved ~2.5K tokens (6 tools pruned)")
  // "detailed": Show full breakdown by tool type and pruning method (default)
  "pruning_summary": "minimal",

  // List of tools that should never be pruned from context
  // "task": Each subagent invocation is intentional
  // "todowrite"/"todoread": Stateful tools where each call matters
  // "context_pruning": The pruning tool itself
  "protectedTools": [
    "task",
    "todowrite",
    "todoread",
    "prune",
    "batch",
    "code-reasoning_code-reasoning",
  ],
}
